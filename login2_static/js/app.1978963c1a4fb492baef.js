webpackJsonp([1],{NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),o=s("mvHQ"),r=s.n(o),i=s("exGp"),c=s.n(i),p=s("u7Vc"),l=(s.n(p),s("7+uW")),d=s("mtWM"),h=s.n(d),g=s("/ocq"),u=s("OGwZ");s.n(u);l.a.config.productionTip=!1,l.a.use(g.a),new l.a({el:"#main",data:function(){return{login_email:"",login_password:"",forget_sms:"",forget_newpassword:"",re_forget_newpassword:"",forget_phone:"",message:"login",loging:!1,show_news:!0}},mounted:function(){},methods:{isShow:function(e){switch(e){case 0:this.message="login";break;case 1:this.message="forget_newpassword";break;case 2:this.message="forget_sms";break;case 3:this.message="forget_setnewpassword";break;default:this.message="login",console.log("有問題回登入")}return this.message},login:function(){var e=c()(a.a.mark(function e(){var t,s=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loging){e.next=2;break}return e.abrupt("return",0);case 2:return this.loging=!0,t=[],e.next=6,h.a.post("https://api.donkeymove.com/api/CompanyUser/CompanyUserLogin?acc="+this.login_email+"&pwd="+this.login_password).then(function(){var e=c()(a.a.mark(function e(n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),"成功"!=n.data.msg){e.next=7;break}return localStorage.dk3_user=r()(n.data.response),e.next=5,h.a.get("https://api.donkeymove.com/api/CompanyUser/GetJwtToken/api/CompanyJWTToken?name="+s.login_email+"&pass="+s.login_password).then(function(){var e=c()(a.a.mark(function e(o){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.dk3_token=r()({token:o.data.token,uid:n.data.response,menu:t}),alert("登入成功"),34==n.data.response.RoleId?location.href="./new/#/DragDispatch/":location.href="./new/#/Chart1";case 3:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}());case 5:e.next=8;break;case 7:"當前使用系統設定之密碼，首次登入需先更換密碼方可正常使用"==n.data.msg?(alert(n.data.msg),s.forget_phone=s.login_email,s.isShow(3),s.loging=!1):(alert(n.data.msg),s.loging=!1);case 8:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),send_sms:function(){var e=c()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=this.forget_phone){e.next=5;break}return alert("請輸入帳號"),e.abrupt("return",0);case 5:return e.next=7,h.a.get("https://api.donkeymove.com/api/CompanyUser/PushPhoneMessage?account="+this.forget_phone).then(function(e){(e.data.msg="成功")&&(alert("已寄驗證碼至您的手機，請確認"),t.isShow(2))});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),check_sms:function(){var e=c()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("https://api.donkeymove.com/api/CompanyUser/CheckPhoneCode?account="+this.forget_phone+"&vCode="+this.forget_sms).then(function(e){"正確"==e.data.msg?t.isShow(3):alert("驗證碼不正確")});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),set_new_password:function(){var e=c()(a.a.mark(function e(){var t=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=this.forget_newpassword&&""!=this.re_forget_newpassword&&this.forget_newpassword==this.re_forget_newpassword){e.next=3;break}return alert("輸入不正確"),e.abrupt("return",0);case 3:return e.next=5,h.a.put("https://api.donkeymove.com/api/CompanyUser/PutForgetPwd?companyUserAcc="+this.forget_phone+"&Password="+this.forget_newpassword).then(function(e){"更新成功"==e.data.msg?(alert("修改成功"),t.isShow(0),t.loging=!1):alert(e.data.msg)});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},template:'<div id="main">    <div class="login" v-if="message===\'login\' ">    <section>    <div class="titleArea">      <h1>新北市政府</h1>      <h3>長照交通接送統一預約服務及管理系統</h3>    </div>    <div class="managerArea">      <h2>管理者Login</h2>      <p>為了保障您的帳號安全，建議您最少於三個月變更一次密碼</p>    </div>    <div class="inputArea">      <form action="" @keyup.enter="login">        <input type="email" name="" id="" v-model="login_email" placeholder="請輸入您的帳號" />        <input type="password" name="" id="" v-model="login_password" placeholder="請輸入您的密碼" />        <a class="loginBtn" @click="login">登入</a>      </form>    </div>    <a href="" class="forgetPWD" @click.prevent="isShow(1)">忘記密碼？</a>  </section>    </div>    <div class="login forget_newpassword" v-else-if="message===\'forget_newpassword\'">    <section>      <div class="titleArea">        <h1>新北市政府</h1>        <h3>長照交通接送統一預約服務及管理系統</h3>      </div>      <div class="managerArea">        <h2>忘記密碼</h2>        <p>請準備好您的手機</p>      </div>      <div class="inputArea">        <form action="">          <input type="tel" name="" id="" placeholder="請輸入您的帳號" v-model="forget_phone" />          <a class="loginBtn" @click.prevent="send_sms">下一步</a>        </form>      </div>      <p style="color:white;">點選下一步，請依照步驟完成驗證註冊</p>    </section>  </div>  <div class="login forget_sms" v-else-if="message===\'forget_sms\'">  <section>    <div class="titleArea">      <h1>新北市政府</h1>      <h3>長照交通接送統一預約服務及管理系統</h3>    </div>    <div class="managerArea">      <h2>已發送簡訊驗證碼到您的手機</h2>      <p v-if="false">手機號碼:{{}}</p>    </div>    <div class="inputArea">      <form action="">        <input type="text" name="" id="" placeholder="請輸入簡訊內的驗證碼" v-model="forget_sms" />        <a class="loginBtn" @click.prevent="check_sms">下一步</a>      </form>    </div>    <p style="color:white;">點選下一步，請依照步驟完成驗證註冊</p>  </section></div><div class="login forget_setnewpassword" v-else-if="message===\'forget_setnewpassword\'"><section>  <div class="titleArea">    <h1>新北市政府</h1>    <h3>長照交通接送統一預約服務及管理系統</h3>  </div>  <div class="managerArea">    <h2>設定登入密碼</h2>    <p>8碼以上且大寫英文、小寫英文、數字、特殊符號，4選3</p>  </div>  <div class="inputArea">    <form action="">      <input type="password" name="" id="" placeholder="請輸入新的密碼" v-model="forget_newpassword"/>      <input type="password" name="" id="" placeholder="再一次輸入新密碼確認" v-model="re_forget_newpassword"/>      <a class="loginBtn" @click.prevent="set_new_password">完成</a>    </form>  </div>  <p style="color:white;">點選下一步，請依照步驟完成驗證註冊</p></section></div>    </div>'})},OGwZ:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1978963c1a4fb492baef.js.map