(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2086b7"],{a55b:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"Login"}},[t._m(0),o("div",{staticClass:"loginBox"},[o("div",{staticClass:"inputBox"},[o("el-input",{staticStyle:{width:"300px"},attrs:{"prefix-icon":"el-icon-user-solid",placeholder:"帳號 / Username"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),o("div",{staticClass:"inputBox"},[o("el-input",{staticStyle:{width:"300px"},attrs:{"prefix-icon":"el-icon-key",placeholder:"密碼 / Password","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),o("div",{staticClass:"identifyBox"},[o("div",{on:{click:t.refreshCode}},[o("Identify",{attrs:{identifyCode:t.identifyCode}})],1),o("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text",placeholder:"請輸入驗證碼"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),o("div",{staticClass:"changeCode"},[t._v("點擊圖片更新驗證碼")]),o("button",{staticClass:"loginHandler",on:{click:t.loginHandler}},[t._v("登入 / Login")])])])},i=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"loginTitle"},[o("p",[t._v("文藻活動後台管理系統")]),o("p",[t._v("管理員登入")])])}],a=(o("18c9"),o("a18c")),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"s-canvas"},[o("canvas",{attrs:{id:"s-canvas",width:t.contentWidth,height:t.contentHeight}})])},s=[],d={name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:32},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:38}},methods:{randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor:function(t,e){var o=this.randomNum(t,e),n=this.randomNum(t,e),i=this.randomNum(t,e);return"rgb("+o+","+n+","+i+")"},drawPic:function(){var t=document.getElementById("s-canvas"),e=t.getContext("2d");e.textBaseline="bottom",e.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),e.fillRect(0,0,this.contentWidth,this.contentHeight);for(var o=0;o<this.identifyCode.length;o++)this.drawText(e,this.identifyCode[o],o);this.drawLine(e),this.drawDot(e)},drawText:function(t,e,o){t.fillStyle=this.randomColor(this.colorMin,this.colorMax),t.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var n=(o+1)*(this.contentWidth/(this.identifyCode.length+1)),i=this.randomNum(this.fontSizeMax,this.contentHeight-5),a=this.randomNum(-25,25);t.translate(n,i),t.rotate(a*Math.PI/180),t.fillText(e,0,0),t.rotate(-a*Math.PI/180),t.translate(-n,-i)},drawLine:function(t){for(var e=0;e<3;e++)t.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),t.beginPath(),t.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),t.stroke()},drawDot:function(t){for(var e=0;e<20;e++)t.fillStyle=this.randomColor(0,255),t.beginPath(),t.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),t.fill()}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}},l=d,c=o("2877"),u=Object(c["a"])(l,r,s,!1,null,"6af9a021",null),h=u.exports,f={data:function(){return{account:"",password:"",code:"",identifyCodes:"1234567890",identifyCode:""}},components:{Identify:h},methods:{randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(t,e){for(var o=0;o<e;o++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)]},loginHandler:function(){var t=this,e={account:t.account,password:t.password};t.$store.dispatch("loadingHandler",!0),t.$api.GetAdminToken(e).then((function(e){if(e.data.success){var o=e.data.token;t.$store.commit("SAVE_TOKEN",o);var n=new Date,i=new Date(n.setSeconds(n.getSeconds()+e.data.expires_in));t.$store.commit("SAVE_TOKEN_EXPIRE",i),window.localStorage.refreshtime=i,window.localStorage.expires_in=e.data.expires_in,t.GetInfoByToken(o)}else t.$store.dispatch("loadingHandler",!1),t.$alertM.fire({icon:"error",title:e.data.message})}))},GetInfoByToken:function(t){var e=this,o={token:t};e.$api.GetInfoByToken(o).then((function(t){window.localStorage.user=JSON.stringify(t.data.response),console.log(t.data.response),e.GetNavigationBar(t.data.response.Id)}))},GetNavigationBar:function(t){var e=this,o={uid:t};e.$api.GetNavigationBar(o).then((function(t){console.log(t,o);var n=t.data.response.children;window.localStorage.router=JSON.stringify(n);var i=Object(a["b"])(n);console.log(i),a["a"].$addRoutes(i),e.$store.dispatch("loadingHandler",!1),e.$router.replace(e.$route.query.redirect?e.$route.query.redirect:"/").then(window.location.reload())}))}},mounted:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)}},m=f,p=Object(c["a"])(m,n,i,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d2086b7.4f2daa74.js.map