(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b2cbb2e"],{"9df1":function(e){e.exports=JSON.parse('{"success":true,"msg":"獲取成功","response":{"value":0,"Pid":0,"label":"根節點","btype":null,"order":0,"isbtn":false,"disabled":false,"children":[{"value":2,"Pid":0,"label":"用戶角色管理","btype":null,"order":0,"isbtn":false,"disabled":false,"children":[{"value":3,"Pid":2,"label":"角色管理","btype":null,"order":1,"isbtn":false,"disabled":false,"children":[{"value":16,"Pid":3,"label":"查詢","btype":"btnSearch","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":17,"Pid":3,"label":"新增","btype":"btnAdd","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":18,"Pid":3,"label":"編輯","btype":"btnEdit","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":19,"Pid":3,"label":"刪除","btype":"btnDelete","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}],"btns":[{"value":16,"Pid":3,"label":"查詢","btype":"btnSearch","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":17,"Pid":3,"label":"新增","btype":"btnAdd","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":18,"Pid":3,"label":"編輯","btype":"btnEdit","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":19,"Pid":3,"label":"刪除","btype":"btnDelete","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}]},{"value":4,"Pid":2,"label":"用戶管理","btype":null,"order":1,"isbtn":false,"disabled":false,"children":[{"value":9,"Pid":4,"label":"查詢","btype":"btnSearch","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":13,"Pid":4,"label":"新增","btype":"btnAdd","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":14,"Pid":4,"label":"編輯","btype":"btnEdit","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":15,"Pid":4,"label":"刪除","btype":"btnDelete","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}],"btns":[{"value":9,"Pid":4,"label":"查詢","btype":"btnSearch","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":13,"Pid":4,"label":"新增","btype":"btnAdd","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":14,"Pid":4,"label":"編輯","btype":"btnEdit","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":15,"Pid":4,"label":"刪除","btype":"btnDelete","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}]}],"btns":[]},{"value":5,"Pid":0,"label":"菜單權限管理","btype":null,"order":0,"isbtn":false,"disabled":false,"children":[{"value":6,"Pid":5,"label":"接口管理","btype":null,"order":1,"isbtn":false,"disabled":false,"children":[{"value":20,"Pid":6,"label":"查詢","btype":"btnSearch","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":21,"Pid":6,"label":"新增","btype":"btnAdd","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":22,"Pid":6,"label":"編輯","btype":"btnEdit","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":23,"Pid":6,"label":"刪除","btype":"btnDelete","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}],"btns":[{"value":20,"Pid":6,"label":"查詢","btype":"btnSearch","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":21,"Pid":6,"label":"新增","btype":"btnAdd","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":22,"Pid":6,"label":"編輯","btype":"btnEdit","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":23,"Pid":6,"label":"刪除","btype":"btnDelete","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}]},{"value":7,"Pid":5,"label":"菜單管理","btype":null,"order":1,"isbtn":false,"disabled":false,"children":[{"value":84,"Pid":7,"label":"菜單樹","btype":null,"order":0,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":87,"Pid":7,"label":"左側導航","btype":null,"order":0,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":24,"Pid":7,"label":"查詢","btype":"btnSearch","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":25,"Pid":7,"label":"新增","btype":"btnAdd","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":26,"Pid":7,"label":"編輯","btype":"btnEdit","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":27,"Pid":7,"label":"刪除","btype":"btnDelete","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}],"btns":[{"value":84,"Pid":7,"label":"菜單樹","btype":null,"order":0,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":87,"Pid":7,"label":"左側導航","btype":null,"order":0,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":24,"Pid":7,"label":"查詢","btype":"btnSearch","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":25,"Pid":7,"label":"新增","btype":"btnAdd","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":26,"Pid":7,"label":"編輯","btype":"btnEdit","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null},{"value":27,"Pid":7,"label":"刪除","btype":"btnDelete","order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}]},{"value":34,"Pid":5,"label":"權限分配","btype":null,"order":1,"isbtn":false,"disabled":false,"children":[{"value":35,"Pid":34,"label":"保存權限","btype":null,"order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}],"btns":[{"value":35,"Pid":34,"label":"保存權限","btype":null,"order":1,"isbtn":true,"disabled":false,"children":null,"btns":null}]}],"btns":[]}]}}')},a34a:function(e,l,t){e.exports=t("96cf")},ae91:function(e,l,t){"use strict";t.r(l);var n=function(){var e=this,l=e.$createElement,t=e._self._c||l;return t("div",{attrs:{id:"userAuthority"}},[t("el-col",{staticClass:"toolbar roles",attrs:{span:12}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"authorityHeader",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("角色")]),t("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:e.refreshRoles}},[e._v("刷新")])],1),e._l(e.rolesData,(function(l){return t("div",{key:l.Id,staticClass:"text item role-item",class:l.Id==e.roleid?"active":"",on:{click:function(t){return e.getPermissionByRid(l.Id,l.Name)}}},[e._v(e._s(l.Name))])}))],2)],1),t("el-col",{staticClass:"toolbar perms",attrs:{span:12}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"authorityHeader",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("權限管理")]),t("el-button",{staticStyle:{padding:"3px 0"},attrs:{type:"text"},on:{click:e.editHandler}},[e._v("修改")])],1),t("div",[e.authorityData?t("el-tree",{ref:"tree",attrs:{data:e.authorityData,"show-checkbox":"","node-key":"value","default-expand-all":"","expand-on-click-node":!0,props:e.defaultProps},on:{check:e.getCheckedKeys}}):e._e()],1)])],1)],1)},a=[],r=t("a34a"),s=t.n(r),i=t("9df1");function d(e,l,t,n,a,r,s){try{var i=e[r](s),d=i.value}catch(b){return void t(b)}i.done?l(d):Promise.resolve(d).then(n,a)}function b(e){return function(){var l=this,t=arguments;return new Promise((function(n,a){var r=e.apply(l,t);function s(e){d(r,n,a,s,i,"next",e)}function i(e){d(r,n,a,s,i,"throw",e)}s(void 0)}))}}var u={name:"UserAuthority",data:function(){return{ogTree:i,roleid:"",roleName:"",permissionId:[],defaultProps:{children:"children",label:"label"},roles:[{Name:"Super_Admin",Id:1},{Name:"Admin",Id:2},{Name:"Master",Id:3},{Name:"User",Id:4}],rolesData:"",authorityData:""}},methods:{getAuthority:function(){var e=this;return b(s.a.mark((function l(){var t,n;return s.a.wrap((function(l){while(1)switch(l.prev=l.next){case 0:return t=e,n={needbtn:!0},l.next=4,t.$api.GetAuthority(n).then((function(e){t.authorityData=e.data.response.children,console.log(t.authorityData)}));case 4:case"end":return l.stop()}}),l)})))()},getRoles:function(){var e=this;return b(s.a.mark((function l(){var t;return s.a.wrap((function(l){while(1)switch(l.prev=l.next){case 0:return t=e,l.next=3,t.$api.GetAllRoles().then((function(e){t.rolesData=e.data.response}));case 3:case"end":return l.stop()}}),l)})))()},refreshRoles:function(){var e=this;return b(s.a.mark((function l(){var t;return s.a.wrap((function(l){while(1)switch(l.prev=l.next){case 0:return t=e,t.$store.dispatch("loadingHandler",!0),l.next=4,t.getRoles();case 4:t.$store.dispatch("loadingHandler",!1),t.$alertM.fire({icon:"success",title:"角色列表刷新成功 ! "});case 6:case"end":return l.stop()}}),l)})))()},getPermissionByRid:function(e,l){var t=this;t.$store.dispatch("loadingHandler",!0),t.roleid=e,t.roleName=l;var n=e,a={rid:n};t.$api.GetPermissionByRid(a).then((function(e){t.permissionId=e.data.response.permissionids,t.$nextTick((function(){this.$refs.tree.setCheckedKeys(t.permissionId)})),t.$store.dispatch("loadingHandler",!1)}))},editHandler:function(){var e=this;e.roleName?e.$swal({title:"修改提示",text:"確認修改角色 ".concat(e.roleName," 權限 ?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#2f3e52",cancelButtonColor:"#522f2f",confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(l){if(l.value){e.$store.dispatch("loadingHandler",!0);var t=e.roleid,n=e.$refs.tree.getCheckedKeys(),a={rid:t,pids:n};console.log(a),e.$api.EditPermissionByRid(a).then((function(l){e.$alertT.fire({icon:"success",title:"角色 ".concat(e.roleName," 權限修改成功 ! ")}),e.$store.dispatch("loadingHandler",!1)}))}else e.$alertT.fire({icon:"warning",title:"已取消修改"})})):e.$alertM.fire({icon:"error",title:"請選擇欲修改角色 ! "})},getCheckedKeys:function(){console.log(this.$refs.tree.getCheckedKeys())}},computed:{data5:function(){var e=this.ogTree.response.children;return JSON.parse(JSON.stringify(e))}},mounted:function(){var e=this;return b(s.a.mark((function l(){return s.a.wrap((function(l){while(1)switch(l.prev=l.next){case 0:return e.$store.dispatch("loadingHandler",!0),e.getRoles(),l.next=4,e.getAuthority();case 4:e.$store.dispatch("loadingHandler",!1);case 5:case"end":return l.stop()}}),l)})))()}},o=u,c=t("2877"),h=Object(c["a"])(o,n,a,!1,null,null,null);l["default"]=h.exports}}]);
//# sourceMappingURL=chunk-9b2cbb2e.f80a9336.js.map