(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-242ce1f3"],{1799:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"pagination"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"pager-count":5,"current-page":e.setCurrentPage,"page-size":e.pageSize},on:{"current-change":e.handleCurrentChange}})],1)},r=[],i=(a("c1df"),a("4360")),o={name:"Pagination",data:function(){return{}},props:{total:{type:Number,default:1,required:!0},keyWord:{type:String,default:"",required:!1},start:{type:String,default:"",required:!1},end:{type:String,default:"",required:!1},currentPage:{type:Number,default:1,required:!1},pageSize:{type:Number,default:10,required:!1}},computed:{setCurrentPage:{get:function(){return this.$props.currentPage},set:function(){}}},methods:{handleCurrentChange:function(e){if(i["a"].dispatch("loadingHandler",!0),this.setCurrentPage=e,this.$props.end){console.log("END");var t=this.$props.keyWord;console.log(t);var a=this.$props.start,n=this.$props.end;this.$emit("changePage",e,t,a,n),window.scrollTo(0,0)}else{var r=this.$props.keyWord;this.$emit("changePage",e,r),window.scrollTo(0,0)}}}},s=o,d=a("2877"),c=Object(d["a"])(s,n,r,!1,null,null,null);t["a"]=c.exports},"97d4":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"headerBox"}},[a("div",{staticClass:"searchBox"},[e.showDatePicker?a("el-date-picker",{staticClass:"datePicker",attrs:{type:"daterange","range-separator":"~","start-placeholder":"開始時間","end-placeholder":"結束時間"},on:{change:e.setSearchDate},model:{value:e.searchDate,callback:function(t){e.searchDate=t},expression:"searchDate"}}):e._e(),e.hasBtn("btnSearch")&&!e.isEvent?a("el-input",{staticClass:"keyWordInput",attrs:{placeholder:"請輸入關鍵字"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.setSearchHandler(t)}},model:{value:e.keyWordInput,callback:function(t){e.keyWordInput=t},expression:"keyWordInput"}}):e._e(),e.hasBtn("btnSearch")&&e.isEvent?a("el-input",{staticClass:"keyWordInput",attrs:{placeholder:"請輸入關鍵字"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.setSearchHandlerDate(t)}},model:{value:e.keyWordInput,callback:function(t){e.keyWordInput=t},expression:"keyWordInput"}}):e._e(),e.hasBtn("btnSearch")&&!e.isEvent?a("el-button",{staticClass:"searchBtn",attrs:{loading:e.searchLoading,type:"primary"},on:{click:e.setSearchHandler}},[e._v("搜尋")]):e._e(),e.hasBtn("btnSearch")&&e.isEvent?a("el-button",{staticClass:"searchBtn",attrs:{loading:e.searchLoading,type:"primary"},on:{click:e.setSearchHandlerDate}},[e._v("搜尋")]):e._e(),e.hasBtn("btnAdd")?a("el-button",{staticClass:"addBtn",attrs:{type:"primary"},on:{click:function(t){return e.setHandleAddOrEdit("add")}}},[e._v("新增")]):e._e(),e.hasBtn("btnEdit")&&e.isEvent?a("el-button",{staticClass:"changeBtn",attrs:{type:"primary"},on:{click:e.setChangeHandler}},[e._v("批次替換")]):e._e(),e.hasBtn("btnImport")?a("el-button",{staticClass:"importBtn",attrs:{type:"primary"},on:{click:e.setImportHandler}},[e._v("匯入")]):e._e(),e.hasBtn("btnExport")?a("el-button",{staticClass:"exportBtn",attrs:{type:"primary"},on:{click:e.setExportHandler}},[e._v("匯出")]):e._e()],1)])},r=[],i=a("c1df"),o=a.n(i),s={name:"HeaderBox",data:function(){return{keyWordInput:"",changeDialogVisible:!1,importDialogVisible:!1,searchDate:""}},props:{buttonList:{type:Array,required:!0,default:[]},showDatePicker:{type:Boolean,default:!1,required:!1},searchLoading:{type:Boolean,default:!1,required:!1},isEvent:{type:Boolean,default:!1,required:!1}},methods:{hasBtn:function(e){return this.buttonList.some((function(t){return t.iconCls==e}))},setHandleAddOrEdit:function(e){this.$emit("handleAddOrEdit",e)},setChangeHandler:function(){this.$emit("changeHandler")},setSearchDate:function(){this.$emit("getSearchDate",this.searchDate)},setSearchHandler:function(){var e=this,t=1,a=e.keyWordInput;e.$emit("searchHandler",{page:t,key:a})},setExportHandler:function(){var e=this,t=e.keyWordInput;if(null!==e.searchDate&&e.searchDate){var a=o()(e.searchDate[0]).format("YYYY-MM-DD"),n=o()(e.searchDate[1]).format("YYYY-MM-DD");e.$emit("exportHandler",{key:t,startDate:a,endDate:n})}else{var r="",i="";e.$emit("exportHandler",{key:t,startDate:r,endDate:i})}},setImportHandler:function(){this.$emit("importHandler",!0)},setSearchHandlerDate:function(){var e=this,t=1,a=e.keyWordInput;if(console.log(e.searchDate),null!==e.searchDate&&e.searchDate){console.log("y");var n=o()(e.searchDate[0]).format("YYYY-MM-DD"),r=o()(e.searchDate[1]).format("YYYY-MM-DD");e.$emit("searchHandlerDate",{page:t,key:a,startDate:n,endDate:r})}else{console.log("n");var i="",s="";e.$emit("searchHandlerDate",{page:t,key:a,startDate:i,endDate:s})}}}},d=s,c=a("2877"),l=Object(c["a"])(d,n,r,!1,null,null,null);t["a"]=l.exports},a34a:function(e,t,a){e.exports=a("96cf")},b2eb:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"calendarCategory"}},[a("HeaderBox",{attrs:{buttonList:e.buttonList,searchLoading:e.searchLoading},on:{searchHandler:e.searchHandler,handleAddOrEdit:e.handleAddOrEdit}}),e.eventTypeData?a("el-table",{attrs:{"header-cell-class-name":"tableHeader",data:e.eventTypeData,"empty-text":"暫無資料","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{prop:"EventTypeName",label:"類別名稱",sortable:""}}),a("el-table-column",{attrs:{prop:"emit",label:"操作",width:"200",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasBtn("btnEdit")?a("el-button",{staticClass:"outline",attrs:{size:"mini"},on:{click:function(a){return e.handleAddOrEdit("edit",t.row)}}},[e._v("編輯")]):e._e(),e.hasBtn("btnDelete")?a("el-button",{staticClass:"outline",attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteHandler(t.row)}}},[e._v("刪除")]):e._e()]}}],null,!1,705506806)})],1):e._e(),e.totalCount?a("Pagination",{attrs:{keyWord:e.keyWordInput,total:e.totalCount,pageSize:e.pageSize,currentPage:e.currentPage},on:{changePage:e.getEventType}}):e._e(),a("el-dialog",{attrs:{"close-on-click-modal":!1,"custom-class":"addOrEditDialog",title:e.addOrEdit,visible:e.addOrEditDialog},on:{"update:visible":function(t){e.addOrEditDialog=t}}},[a("ValidationObserver",{ref:"obs"},[a("div",{staticClass:"inputBox"},[a("p",{staticClass:"inputTitle"},[e._v("類別名稱:")]),a("ValidationProvider",{attrs:{name:"請輸入類別名!!",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,r=t.classes;return[a("el-input",{class:r,staticStyle:{width:"350px"},attrs:{placeholder:"請輸入行事曆類別名稱"},model:{value:e.categoryName,callback:function(t){e.categoryName=t},expression:"categoryName"}}),n[0]?a("span",{staticClass:"validateSpan"},[e._v(e._s(n[0]))]):e._e()]}}])})],1),a("div",{staticClass:"inputBox",staticStyle:{"flex-wrap":"wrap"}},[a("p",{staticClass:"inputTitle"},[e._v("起迄日:")]),a("ValidationProvider",{attrs:{name:"請輸入起迄日!!",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,r=t.classes;return[a("el-date-picker",{class:r,staticStyle:{width:"350px"},attrs:{type:"daterange","range-separator":"~","start-placeholder":"開始日期","end-placeholder":"結束日期"},model:{value:e.startEndDate,callback:function(t){e.startEndDate=t},expression:"startEndDate"}}),n[0]?a("span",{staticClass:"validateSpan"},[e._v(e._s(n[0]))]):e._e()]}}])})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addOrEditDialog=!1}}},[e._v("取 消")]),"新增"===e.addOrEdit?a("el-button",{attrs:{loading:e.addLoading,type:"primary"},on:{click:e.addHandler}},[e._v("新 增")]):a("el-button",{attrs:{loading:e.editLoading,type:"primary"},on:{click:e.editHandler}},[e._v("編 輯")])],1)],1)],1)},r=[],i=a("a34a"),o=a.n(i),s=a("97d4"),d=a("1799"),c=a("c1df"),l=a.n(c);function u(e,t,a,n,r,i,o){try{var s=e[i](o),d=s.value}catch(c){return void a(c)}s.done?t(d):Promise.resolve(d).then(n,r)}function p(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(e){u(i,n,r,o,s,"next",e)}function s(e){u(i,n,r,o,s,"throw",e)}o(void 0)}))}}var h={name:"CalendarCategory",data:function(){return{keyWordInput:"",categoryName:"",totalCount:"",pageSize:"",startEndDate:"",buttonList:[],addOrEditDialog:!1,addOrEdit:"新增",editId:"",currentPage:1,eventTypeData:"",searchLoading:!1,addLoading:!1,editLoading:!1,tableData:[{category:"重大會議"},{category:"活動"},{category:"節慶"},{category:"其他事件"}]}},components:{HeaderBox:s["a"],Pagination:d["a"]},methods:{getEventType:function(){var e=arguments,t=this;return p(o.a.mark((function a(){var n,r,i;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,e.length>1?e[1]:void 0,r=t,i={key:r.keyWordInput,page:n},a.next=6,r.$api.SearchEventType(i).then((function(e){r.totalCount=e.data.response.dataCount,r.eventTypeData=e.data.response.data,r.pageSize=e.data.response.PageSize,r.currentPage=n,r.$store.dispatch("loadingHandler",!1)}));case 6:case"end":return a.stop()}}),a)})))()},searchHandler:function(e){var t=e.page,a=e.key,n=this;n.searchLoading=!0,n.keyWordInput=a;var r={key:a,page:t};n.$api.SearchEventType(r).then((function(e){n.totalCount=e.data.response.dataCount,n.eventTypeData=e.data.response.data,n.pageSize=e.data.response.PageSize,n.searchLoading=!1,n.currentPage=1}))},addHandler:function(){var e=this;return p(o.a.mark((function t(){var a,n,r,i,s,d;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$refs.obs.validate();case 3:n=t.sent,n?(a.addLoading=!0,r=a.categoryName,i=l()(a.startEndDate[0]).format("YYYY-MM-DD"),s=l()(a.startEndDate[1]).format("YYYY-MM-DD"),d={eventTypeName:r,StartDate:i,EndDate:s},a.$api.AddEventType(d).then((function(e){a.getEventType(),a.addOrEditDialog=!1,a.addLoading=!1,a.$alertM.fire({icon:"success",title:"類別 ".concat(r," 添加成功 ! ")})}))):a.$alertM.fire({icon:"error",title:"請確認欄位是否正確填寫"});case 5:case"end":return t.stop()}}),t)})))()},editHandler:function(){var e=this;return p(o.a.mark((function t(){var a,n,r,i,s,d;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.$refs.obs.validate();case 3:n=t.sent,n?(a.editLoading=!0,r=a.categoryName,i=l()(a.startEndDate[0]).format("YYYY-MM-DD"),s=l()(a.startEndDate[1]).format("YYYY-MM-DD"),d={id:a.editId,eventTypeName:r,StartDate:i,EndDate:s},a.$api.EditEventType(d).then((function(t){a.getEventType(),e.addOrEditDialog=!1,a.editLoading=!1,a.$alertM.fire({icon:"success",title:"類別 ".concat(r," 更新成功 ! ")})}))):a.$alertM.fire({icon:"error",title:"請確認欄位是否正確填寫!"});case 5:case"end":return t.stop()}}),t)})))()},deleteHandler:function(e){var t=this;t.$swal({title:"刪除提示",text:"確認刪除 ".concat(e.EventTypeName," ?"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#2f3e52",cancelButtonColor:"#522f2f",confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(a){if(a.value){var n={id:e.Id};t.$api.DeleteEventType(n).then((function(e){t.getEventType()})),t.$alertT.fire({icon:"success",title:"類別 ".concat(e.EventTypeName," 删除成功")})}else t.addLoading=!1,t.$alertT.fire({icon:"warning",title:"已取消刪除"})}))},hasBtn:function(e){return this.buttonList.some((function(t){return t.iconCls==e}))},handleAddOrEdit:function(e){var t=arguments,a=this;return p(o.a.mark((function n(){var r,i;return o.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.length>1&&void 0!==t[1]?t[1]:"",i=a,!i.$refs.obs){n.next=5;break}return n.next=5,i.$refs.obs.reset();case 5:i.categoryName="",i.startEndDate="",i.addOrEdit="新增","add"===e?i.addOrEditDialog=!0:(console.log(r),i.addOrEdit="編輯",i.editId=r.Id,i.startEndDate=[r.StartDate,r.EndDate],i.addOrEditDialog=!0,i.categoryName=r.EventTypeName);case 9:case"end":return n.stop()}}),n)})))()},getButtonList:function(e,t){var a=this,n=this,r=[];return t.forEach((function(t){if(e&&t.path){var i=e.toLowerCase();if(t.path&&t.path.toLowerCase()===i)return r=t.children,void(n.buttonList=r);t.children&&a.getButtonList(i,t.children)}})),r}},mounted:function(){var e=this;return p(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$store.dispatch("loadingHandler",!0),a=JSON.parse(window.localStorage.router)?JSON.parse(window.localStorage.router):[],e.getButtonList(e.$route.path,a),t.next=5,e.getEventType();case 5:e.$store.dispatch("loadingHandler",!1);case 6:case"end":return t.stop()}}),t)})))()}},g=h,f=a("2877"),v=Object(f["a"])(g,n,r,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-242ce1f3.4326ffac.js.map