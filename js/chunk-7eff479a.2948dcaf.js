(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eff479a"],{"1b74":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"carousel"}},[a("CarouselModel")],1)},s=[],r=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"editModel"},[n("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.isAdd?"新增":"修改",visible:e.showEdit,width:"500px"},on:{"update:visible":function(t){e.showEdit=t}}},[n("el-form",{attrs:{"label-width":"100px"}},[n("el-form-item",{attrs:{label:"標題"}},[n("el-input",{model:{value:e.form.Title,callback:function(t){e.$set(e.form,"Title",t)},expression:"form.Title"}})],1),n("el-form-item",{attrs:{label:"圖片"}},[e.form.Pic?n("div",[n("a",{attrs:{href:e.form.Pic}},[e._v(e._s(e.form.Pic))]),n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.form.Pic=""}}},[e._v("刪除")])],1):e._e(),n("el-upload",{attrs:{"show-file-list":!1,action:e.$store.state.apiBase+"Img",headers:{authorization:"Bearer "+e.$store.state.token},"on-progress":function(){t.$store.dispatch("loadingHandler",!0)},"on-success":function(t,a){return e.successUpdata(t,a)}}},[e.form.Pic?e._e():n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上傳圖片")])],1)],1),n("div",{staticClass:"formButtonList"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sub()}}},[e._v("儲存")])],1)],1)],1),n("div",{staticClass:"editModelTitle"},[n("h2",{staticClass:"editModelTitleH2"},[e._v("輪播圖設定")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("新增輪播圖")])],1),n("div",{staticClass:"carouselBox"},[n("el-carousel",{staticStyle:{width:"1200px"},attrs:{trigger:"click",height:"500px"}},e._l(e.list.data,(function(t,e){return n("el-carousel-item",{key:e},[n("div",{staticClass:"carouselItem"},[n("img",{staticClass:"carouselItemImg",attrs:{src:t.Pic}})])])})),1)],1),n("div",{staticClass:"tableD"},[n("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-class-name":"tableHeader",data:e.list.data}},[n("el-table-column",{attrs:{label:"標題",prop:"Title",sortable:""}}),n("el-table-column",{attrs:{label:"圖片",prop:"Pic",sortable:""}}),n("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"iconList"},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"編輯",placement:"top","open-delay":500}},[n("div",{staticClass:"iconListD",on:{click:function(a){return e.edit(t.row)}}},[n("i",{staticClass:"myicon-edit"})])]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"刪除",placement:"top","open-delay":500}},[n("div",{staticClass:"iconListD",on:{click:function(a){return e.del(t.row.Id)}}},[n("i",{staticClass:"myicon-delete"})])])],1)]}}])})],1)],1)],1)},i=[],o=a("a34a"),c=a.n(o);function l(t,e,a,n,s,r,i){try{var o=t[r](i),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(n,s)}function u(t){return function(){var e=this,a=arguments;return new Promise((function(n,s){var r=t.apply(e,a);function i(t){l(r,n,s,i,o,"next",t)}function o(t){l(r,n,s,i,o,"throw",t)}i(void 0)}))}}var d={data:function(){return{search:{page:1,key:""},form:{Id:0,Title:"",Pic:""},isAdd:!1,showEdit:!1,list:[]}},created:function(){var t=this;return u(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("loadingHandler",!0),e.next=3,t.getData();case 3:t.$store.dispatch("loadingHandler",!1);case 4:case"end":return e.stop()}}),e)})))()},methods:{getData:function(){var t=this;return u(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.GetBanner(t.search).then((function(t){return t.data.response}));case 2:t.list=e.sent;case 3:case"end":return e.stop()}}),e)})))()},sub:function(){var t=this;return u(c.a.mark((function e(){return c.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.dispatch("loadingHandler",!0),"",!t.isAdd){e.next=8;break}return e.next=5,t.$api.PostBanner(t.form).then((function(t){return t.data}));case 5:e.sent,e.next=11;break;case 8:return e.next=10,t.$api.PutBanner(t.form).then((function(t){return t.data}));case 10:e.sent;case 11:return e.next=13,t.getData();case 13:t.showEdit=!1,t.$store.dispatch("loadingHandler",!1);case 15:case"end":return e.stop()}}),e)})))()},add:function(){this.form={Id:0,Title:"",Pic:""},this.isAdd=!0,this.showEdit=!0},edit:function(t){this.form=JSON.parse(JSON.stringify(t)),this.isAdd=!1,this.showEdit=!0},del:function(t){var e=this;return u(c.a.mark((function a(){var n;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=confirm("確定刪除?"),n){a.next=3;break}return a.abrupt("return",0);case 3:return a.next=5,e.$api.DelBanner({Id:t});case 5:return a.next=7,e.getData();case 7:case"end":return a.stop()}}),a)})))()},successUpdata:function(t,e){var a=this;return u(c.a.mark((function n(){return c.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(t,e),t.success&&(a.form.Pic=a.$store.state.fileBase+t.response),a.$store.dispatch("loadingHandler",!1);case 3:case"end":return n.stop()}}),n)})))()}}},f=d,p=a("2877"),h=Object(p["a"])(f,r,i,!1,null,null,null),m=h.exports,v={components:{CarouselModel:m}},w=v,b=Object(p["a"])(w,n,s,!1,null,null,null);e["default"]=b.exports},a34a:function(t,e,a){t.exports=a("96cf")}}]);
//# sourceMappingURL=chunk-7eff479a.2948dcaf.js.map