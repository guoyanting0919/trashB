(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73435954"],{"006d":function(t,e,r){t.exports=r.p+"img/GroupLeft.6fb24aea.svg"},"43b3":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"title"}},[t._v(" "+t._s(t.title)+" ")])},o=[],n={props:["title"]},l=n,i=r("2877"),s=Object(i["a"])(l,a,o,!1,null,null,null);e["a"]=s.exports},"734b":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"ActivityEdit"},on:{click:function(e){t.canSave=!0}}},[a("div",{staticClass:"Step"},[a("el-steps",{staticStyle:{width:"1000px"},attrs:{active:t.step}},[a("el-step",{staticStyle:{cursor:"pointer"},attrs:{title:"步驟一：活動基本確認"},nativeOn:{click:function(e){return t.subTemp("form",1)}}}),a("el-step",{staticStyle:{cursor:"pointer"},attrs:{title:"步驟二：前台資訊確認"},nativeOn:{click:function(e){return t.subTemp("form",2)}}}),a("el-step",{staticStyle:{cursor:"pointer"},attrs:{title:"步驟三：報名欄位確認"},nativeOn:{click:function(e){return t.subTemp("form",3)}}})],1)],1),a("Title",{attrs:{title:1==t.step?"步驟一：活動基本確認":2==t.step?"步驟二：前台資訊確認":"步驟三：報名欄位確認"}}),a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{rules:t.rules,"label-width":"150px",model:t.form}},[1==t.step?a("div",[a("el-form-item",{attrs:{label:"活動名稱",prop:"ActName"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.form.ActName,callback:function(e){t.$set(t.form,"ActName",e)},expression:"form.ActName"}})],1),a("el-form-item",{attrs:{label:"主辦單位"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.form.ActOrganizer,callback:function(e){t.$set(t.form,"ActOrganizer",e)},expression:"form.ActOrganizer"}}),a("p",{staticClass:"red"},[t._v("請填寫完整校名+單位全名，")]),a("p",{staticClass:"red"},[t._v("如：文藻外語大學學生事務處生活輔導組")]),a("p",{staticClass:"red"},[t._v("請填寫完整校名+學院全名+系所全名，")]),a("p",{staticClass:"red"},[t._v("如：文藻外語大學歐亞語文學院法國語文系")])],1),a("el-form-item",{attrs:{label:"活動類別",prop:"ActTypeId"}},[a("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.form.ActTypeId,callback:function(e){t.$set(t.form,"ActTypeId",e)},expression:"form.ActTypeId"}},t._l(t.$store.state.actType,(function(t){return a("el-option",{key:t.Id,attrs:{label:t.title,value:t.Id}})})),1),5==t.form.ActTypeId?a("el-input",{staticStyle:{width:"240px"},model:{value:t.form.ActTypeOther,callback:function(e){t.$set(t.form,"ActTypeOther",e)},expression:"form.ActTypeOther"}}):t._e(),a("p",{staticClass:"red"},[t._v(" 與論文發表有關的活動，請選學術研討會，其他與講授有關的活動，請選研習。 ")])],1),a("el-form-item",{attrs:{label:"活動型態"}},[a("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.form.ActCategoryId,callback:function(e){t.$set(t.form,"ActCategoryId",e)},expression:"form.ActCategoryId"}},t._l(t.$store.state.actCategory,(function(t){return a("el-option",{key:t.Id,attrs:{label:t.title,value:t.Id}})})),1),3==t.form.ActCategoryId?a("el-input",{staticStyle:{width:"240px"},model:{value:t.form.ActCategoryOther,callback:function(e){t.$set(t.form,"ActCategoryOther",e)},expression:"form.ActCategoryOther"}}):t._e()],1),a("el-form-item",{attrs:{label:"簡單說明"}},[1==t.step?a("Ck",{attrs:{width:"598px"},model:{value:t.form.ActSummary,callback:function(e){t.$set(t.form,"ActSummary",e)},expression:"form.ActSummary"}}):t._e()],1),a("el-form-item",{attrs:{label:"上傳圖檔"}},[t._l(t.form.ActImg,(function(e,r){return a("div",{key:r},[a("a",{attrs:{href:t.$store.state.fileBase+e.response,target:"_blank"}},[t._v(t._s(e.response))]),a("el-button",{staticClass:"removeFile",attrs:{type:"danger"},on:{click:function(e){return t.FilesRemove(r,"ActImg")}}},[t._v("刪除")])],1)})),a("el-upload",{attrs:{"show-file-list":!1,action:t.$store.state.apiBase+"Img",headers:{authorization:"Bearer "+t.$store.state.token},"on-success":function(e,r){return t.successUpdata(e,r,"ActImg",!0)}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("點擊上傳")])],1),a("p",{staticClass:"red"},[t._v("推薦尺寸為350px * 200px")]),a("p",{staticClass:"red"},[t._v("若為滿版，推薦尺寸則為寬度1000px，高度不限")])],2),a("el-form-item",{attrs:{label:"頁面布局"}},[a("p",[t._v("請選擇頁面佈局")]),a("p",{staticClass:"red"},[t._v("此設定為圖片與文字於前台顯示之版面配置。")]),a("el-radio-group",{model:{value:t.form.WebMode,callback:function(e){t.$set(t.form,"WebMode",e)},expression:"form.WebMode"}},[a("el-radio",{attrs:{label:1}},[a("img",{attrs:{src:r("006d")}})]),a("el-radio",{attrs:{label:2}},[a("img",{attrs:{src:r("a878")}})]),a("el-radio",{attrs:{label:3}},[a("img",{attrs:{src:r("e98f")}})])],1)],1),a("el-form-item",{attrs:{label:"活動開始時間"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-ddTHH:mm:ss",placeholder:"請選擇日期"},model:{value:t.form.ActStartDate,callback:function(e){t.$set(t.form,"ActStartDate",e)},expression:"form.ActStartDate"}})],1),a("el-form-item",{attrs:{label:"活動結束時間"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-ddTHH:mm:ss",placeholder:"請選擇日期"},model:{value:t.form.ActEndDate,callback:function(e){t.$set(t.form,"ActEndDate",e)},expression:"form.ActEndDate"}}),a("p",{staticClass:"red"},[t._v(" 請務必設定正確的活動開始與結束時間，以免造成前台顯示錯誤，與匯入錯誤 資訊至教師歷程中。 ")])],1),a("el-form-item",{attrs:{label:"前台公布日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"請選擇日期"},model:{value:t.form.ShowDate,callback:function(e){t.$set(t.form,"ShowDate",e)},expression:"form.ShowDate"}})],1),a("el-form-item",{attrs:{label:"前台失效日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"請選擇日期"},model:{value:t.form.EndDate,callback:function(e){t.$set(t.form,"EndDate",e)},expression:"form.EndDate"}})],1),a("el-form-item",{attrs:{label:"是否開啟報到代碼"}},[a("el-radio-group",{model:{value:t.form.HasCheckInCode,callback:function(e){t.$set(t.form,"HasCheckInCode",e)},expression:"form.HasCheckInCode"}},[a("el-radio",{attrs:{label:!0}},[t._v("是")]),a("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),a("el-form-item",{attrs:{label:"證書底圖"}},[a("el-select",{on:{change:function(e){t.form.CertificateId=null}},model:{value:t.changeCateTemp,callback:function(e){t.changeCateTemp=e},expression:"changeCateTemp"}},t._l(t.UnitList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.UntNameFull,value:t.UntId}})})),1),a("el-select",{model:{value:t.form.CertificateId,callback:function(e){t.$set(t.form,"CertificateId",e)},expression:"form.CertificateId"}},t._l(t.getCateTemp,(function(t,e){return a("el-option",{key:e,attrs:{label:t.CertName,value:t.Id}})})),1)],1),a("el-form-item",{attrs:{label:"證書字號"}},[t._v(" ("+t._s(t.getEndYear?t.getEndYear-1911:" ")+") "),a("el-input",{staticStyle:{width:"240px"},model:{value:t.form.CertificateNo,callback:function(e){t.$set(t.form,"CertificateNo",e)},expression:"form.CertificateNo"}}),t._v("第XXX號 ")],1),2==t.form.ActCategoryId&&1==t.form.ActTypeId?a("el-form-item",{attrs:{label:"上傳徵稿檔案"}},[t._l(t.form.SolicitFile,(function(e,r){return a("div",{key:r},[a("a",{attrs:{href:t.$store.state.fileBase+e.response,target:"_blank"}},[t._v(t._s(e.response))]),a("el-button",{staticClass:"removeFile",attrs:{type:"danger"},on:{click:function(e){return t.FilesRemove(r,"SolicitFile")}}},[t._v("刪除")])],1)})),a("el-upload",{attrs:{"show-file-list":!1,action:t.$store.state.apiBase+"Img",headers:{authorization:"Bearer "+t.$store.state.token},"on-success":function(e,r){return t.successUpdata(e,r,"SolicitFile",!0)}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("點擊上傳")])],1)],2):t._e(),a("el-form-item",{attrs:{label:"舉辦國家"}},[a("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.form.ActCountry,callback:function(e){t.$set(t.form,"ActCountry",e)},expression:"form.ActCountry"}},t._l(t.$store.state.Country,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"活動使用語言"}},[a("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.form.UseLanguage,callback:function(e){t.$set(t.form,"UseLanguage",e)},expression:"form.UseLanguage"}},[a("el-option",{attrs:{label:"中文",value:"中文"}}),a("el-option",{attrs:{label:"外語",value:"外語"}}),a("el-option",{attrs:{label:"中文和外語",value:"中文和外語"}})],1),"外語"==t.form.UseLanguage||"中文和外語"==t.form.UseLanguage?a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"請輸入外語語言"},model:{value:t.form.UseLanguageOther,callback:function(e){t.$set(t.form,"UseLanguageOther",e)},expression:"form.UseLanguageOther"}}):t._e()],1),a("el-form-item",{attrs:{label:"活動地點"}},[a("el-input",{staticStyle:{width:"240px"},model:{value:t.form.ActAddr,callback:function(e){t.$set(t.form,"ActAddr",e)},expression:"form.ActAddr"}}),a("p",{staticClass:"red"},[t._v("活動使用之地點如：Z1205、化雨堂。")])],1),a("el-form-item",{attrs:{label:"活動時數"}},[a("el-input-number",{attrs:{precision:1,step:.1,min:0},model:{value:t.form.ActTime,callback:function(e){t.$set(t.form,"ActTime",e)},expression:"form.ActTime"}})],1),a("el-form-item",{attrs:{label:"報名通知Email"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.form.NoticEmail,callback:function(e){t.$set(t.form,"NoticEmail",e)},expression:"form.NoticEmail"}}),a("p",{staticClass:"red"},[t._v("如有多個 email 請以逗號區隔")])],1),a("el-form-item",{attrs:{label:"上限人數"}},[a("el-input-number",{attrs:{min:1},model:{value:t.form.MaxUser,callback:function(e){t.$set(t.form,"MaxUser",e)},expression:"form.MaxUser"}})],1),a("el-form-item",{attrs:{label:"啟用"}},[a("el-checkbox",{model:{value:t.form.isEnable,callback:function(e){t.$set(t.form,"isEnable",e)},expression:"form.isEnable"}})],1),a("el-form-item",{attrs:{label:"個資聲明",prop:"IndividualStatementId"}},[a("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.form.IndividualStatementId,callback:function(e){t.$set(t.form,"IndividualStatementId",e)},expression:"form.IndividualStatementId"}},t._l(t.IndividualStatementModuleList,(function(t){return a("el-option",{key:t.Id,attrs:{label:t.Name,value:t.Id}})})),1)],1)],1):t._e(),2==t.step?a("div",[a("el-form-item",{attrs:{label:"公告單位"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:""},model:{value:t.form.ShowUnit,callback:function(e){t.$set(t.form,"ShowUnit",e)},expression:"form.ShowUnit"}})],1),a("el-form-item",{attrs:{label:"活動內容"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:""},model:{value:t.form.ShowActContents,callback:function(e){t.$set(t.form,"ShowActContents",e)},expression:"form.ShowActContents"}})],1),a("el-form-item",{attrs:{label:"活動時間"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:""},model:{value:t.form.ShowActDate,callback:function(e){t.$set(t.form,"ShowActDate",e)},expression:"form.ShowActDate"}})],1),a("el-form-item",{attrs:{label:"活動地點"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:""},model:{value:t.form.ShowActAddr,callback:function(e){t.$set(t.form,"ShowActAddr",e)},expression:"form.ShowActAddr"}})],1),a("el-form-item",{attrs:{label:"相關網址"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:""},model:{value:t.form.ShowAcrUrl,callback:function(e){t.$set(t.form,"ShowAcrUrl",e)},expression:"form.ShowAcrUrl"}})],1),a("el-form-item",{attrs:{label:"聯絡人"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:""},model:{value:t.form.ShowContactName,callback:function(e){t.$set(t.form,"ShowContactName",e)},expression:"form.ShowContactName"}})],1),a("el-form-item",{attrs:{label:"活動使用語言"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:""},model:{value:t.form.ShowUseLanguage,callback:function(e){t.$set(t.form,"ShowUseLanguage",e)},expression:"form.ShowUseLanguage"}})],1),a("el-form-item",{attrs:{label:"活動時數"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",autosize:""},model:{value:t.form.ShowActTime,callback:function(e){t.$set(t.form,"ShowActTime",e)},expression:"form.ShowActTime"}})],1),a("el-form-item",{attrs:{label:"所有附件"}},[a("el-table",{staticStyle:{width:"800px"},attrs:{data:t.form.AttachmentFiles}},[a("el-table-column",{attrs:{label:"附件名稱",prop:"response"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.path[0].response))]}}],null,!1,211866123)}),a("el-table-column",{attrs:{label:"附件類別"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{domProps:{innerHTML:t._s(e.row.type)}})]}}],null,!1,3649829644)}),a("el-table-column",{attrs:{label:"附件說明"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{domProps:{innerHTML:t._s(e.row.remark)}})]}}],null,!1,4043026422)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"iconList"},[a("a",{attrs:{href:t.$store.state.fileBase+e.row.path[0].response,target:"_blank"}},[a("el-button",{attrs:{type:"primary"}},[t._v("下載")])],1),a("el-button",{staticStyle:{margin:"0 0 0 10px"},attrs:{type:"danger"},on:{click:function(r){return t.FilesRemove(e.$index)}}},[t._v("刪除")])],1)]}}],null,!1,3394637939)})],1)],1),a("el-form-item",{attrs:{label:"上傳附件"}},[a("div",{staticStyle:{display:"flex"}},[a("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.addFileForm.type,callback:function(e){t.$set(t.addFileForm,"type",e)},expression:"addFileForm.type"}},[a("el-option",{attrs:{label:"議程",value:"議程"}}),a("el-option",{attrs:{label:"徵稿啟示",value:"徵稿啟示"}}),a("el-option",{attrs:{label:"其他",value:"其他"}})],1),a("el-upload",{attrs:{"show-file-list":!1,action:t.$store.state.apiBase+"Img",headers:{authorization:"Bearer "+t.$store.state.token},"on-success":function(e,r){return t.successUpdata(e,r,"path",!0,"addFileForm")}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("點擊上傳")])],1),t._l(t.addFileForm.path,(function(e,r){return a("a",{key:r,attrs:{href:t.$store.state.fileBase+e.response,target:"_blank"}},[t._v(t._s(e.response))])}))],2)]),a("el-form-item",{attrs:{label:"附件說明"}},[a("el-input",{model:{value:t.addFileForm.remark,callback:function(e){t.$set(t.addFileForm,"remark",e)},expression:"addFileForm.remark"}}),t.addFileForm.path.length?a("el-button",{staticStyle:{margin:"0 0 0 10px"},attrs:{type:"primary"},on:{click:t.toAddFile}},[t._v("確定上傳")]):t._e()],1)],1):t._e(),3==t.step?a("div",[a("el-form-item",{attrs:{label:"報名表單",prop:"FormId"}},[a("el-select",{attrs:{placeholder:"請選擇"},on:{change:function(e){t.GetFormById(t.form.FormId),t.clear()}},model:{value:t.form.FormId,callback:function(e){t.$set(t.form,"FormId",e)},expression:"form.FormId"}},[a("el-option",{attrs:{label:"請選擇",value:""}}),t._l(t.FormList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.FormName,value:t.Id}})}))],2),a("p",{staticClass:"red"},[t._v(" 待完成表單編輯後，需從下拉式選單中，選取新建表單後才可繼續如下設定。 ")])],1),a("el-form-item",{attrs:{label:"報名開始時間"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-ddTHH:mm:ss",placeholder:"選擇日期時間"},model:{value:t.form.SignupStartDate,callback:function(e){t.$set(t.form,"SignupStartDate",e)},expression:"form.SignupStartDate"}})],1),a("el-form-item",{attrs:{label:"報名結束時間"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-ddTHH:mm:ss",placeholder:"選擇日期時間"},model:{value:t.form.SignupEndDate,callback:function(e){t.$set(t.form,"SignupEndDate",e)},expression:"form.SignupEndDate"}}),a("p",{staticClass:"red"},[t._v(" 務必設定正確，以避免活動結束且簽核，仍可報名等情況發生。 ")])],1),a("el-form-item",{attrs:{label:"允許取消報名"}},[a("el-radio-group",{model:{value:t.form.HasCancelBtn,callback:function(e){t.$set(t.form,"HasCancelBtn",e)},expression:"form.HasCancelBtn"}},[a("el-radio",{attrs:{label:!0}},[t._v("是")]),a("el-radio",{attrs:{label:!1}},[t._v("否")])],1),a("p",{staticClass:"red"},[t._v(" 如欲開啟前台提供報名連結請選「是」，若不須進行報名程序請選「否」。 ")])],1),a("el-form-item",{attrs:{label:"請設置已報名名單欄位"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"請選擇",multiple:""},model:{value:t.form.RegisterColumns,callback:function(e){t.$set(t.form,"RegisterColumns",e)},expression:"form.RegisterColumns"}},t._l(t.getFormData.FormDtlDTO,(function(t,e){return a("el-option",{key:e,attrs:{label:t.ColumnName,value:String(t.Id)}})})),1),a("p",{staticClass:"red"},[t._v(" 如欲前台顯示參與人員名單，請依需求設定，如否則免。 ")])],1),a("el-form-item",{attrs:{label:"請設置識別證欄位"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"請選擇",multiple:""},model:{value:t.form.IdentifyColumns,callback:function(e){t.$set(t.form,"IdentifyColumns",e)},expression:"form.IdentifyColumns"}},t._l(t.getFormData.FormDtlDTO,(function(t,e){return a("el-option",{key:e,attrs:{label:t.ColumnName,value:String(t.Id)}})})),1),a("p",{staticClass:"red"},[t._v(" 本系統提供自動產出識別證之功能，請依單位需求設定，如否則免。 ")])],1),a("el-form-item",{attrs:{label:"請設置簽到表顯示"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"請選擇",multiple:""},model:{value:t.form.SignInColumns,callback:function(e){t.$set(t.form,"SignInColumns",e)},expression:"form.SignInColumns"}},[a("el-option",{attrs:{label:"序號",value:"序號"}}),a("el-option",{attrs:{label:"代理人",value:"代理人"}}),a("el-option",{attrs:{label:"參與狀況",value:"參與狀況"}}),t._l(t.getFormData.FormDtlDTO,(function(t,e){return a("el-option",{key:e,attrs:{label:t.ColumnName,value:String(t.Id)}})}))],2),a("p",{staticClass:"red"},[t._v(" 如欲使用本系統產出之簽到表，請依需求設定，如否則免。 ")])],1),a("el-form-item",{attrs:{label:"請設置證書審核欄位"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"請選擇",multiple:""},model:{value:t.form.CertificateColumns,callback:function(e){t.$set(t.form,"CertificateColumns",e)},expression:"form.CertificateColumns"}},t._l(t.getFormData.FormDtlDTO,(function(t,e){return a("el-option",{key:e,attrs:{label:t.ColumnName,value:String(t.Id)}})})),1),a("p",{staticClass:"red"},[t._v(" 如使用本系統產出證書，請務必設定，建議設定基本欄位為「單位」和「姓名」。 ")])],1),a("el-form-item",{attrs:{label:"活動資訊清單"}},[t._l(t.form.MenuSort,(function(e,r){return a("div",{key:r,staticClass:"MenuSortList"},[a("el-checkbox",{model:{value:e.Enable,callback:function(r){t.$set(e,"Enable",r)},expression:"item.Enable"}},[t._v(t._s(e.title))]),a("div",{staticClass:"MenuSortListIconBox"},[a("i",{staticClass:"MenuSortListIcon myicon-arrow-up-2",on:{click:function(e){return t.ArrayMove(t.form.MenuSort,r,r-1==-1?7:r-1)}}}),a("i",{staticClass:"MenuSortListIcon myicon-arrow-down-2",on:{click:function(e){return t.ArrayMove(t.form.MenuSort,r,r+1==8?0:r+1)}}})])],1)})),a("p",{staticClass:"red"},[t._v("依需求設定欲於前台顯現提供閱覽之項目。")])],2),a("el-form-item",{attrs:{label:"發佈到行事曆"}},[a("el-radio-group",{model:{value:t.form.PostToCalendar,callback:function(e){t.$set(t.form,"PostToCalendar",e)},expression:"form.PostToCalendar"}},[a("el-radio",{attrs:{label:!0}},[t._v("是")]),a("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),a("el-form-item",{attrs:{label:"交通指引"}},[a("el-select",{attrs:{placeholder:"請選擇"},model:{value:t.form.TrafficType,callback:function(e){t.$set(t.form,"TrafficType",e)},expression:"form.TrafficType"}},[a("el-option",{attrs:{label:"校內",value:1}}),a("el-option",{attrs:{label:"校外",value:2}})],1),t._l(t.form.TrafficFile,(function(e,r){return a("div",{key:r},[a("a",{attrs:{href:t.$store.state.fileBase+e.response,target:"_blank"}},[t._v(t._s(e.response))]),a("el-button",{staticClass:"removeFile",attrs:{type:"danger"},on:{click:function(e){return t.FilesRemove(r,"TrafficFile")}}},[t._v("刪除")])],1)})),2==t.form.TrafficType?a("el-upload",{attrs:{"show-file-list":!1,action:t.$store.state.apiBase+"Img",accept:".pdf, .PDF",headers:{authorization:"Bearer "+t.$store.state.token},"on-success":function(e,r){return t.successUpdata(e,r,"TrafficFile",!0)}}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("點擊上傳")])],1):t._e(),a("p",{staticClass:"red"},[t._v('若選"其他"，則需上傳檔案(僅限PDF檔)')])],2),a("el-form-item",{attrs:{label:"QRcode密碼"}},[a("el-input",{staticStyle:{width:"240px"},model:{value:t.form.QRCodePwd,callback:function(e){t.$set(t.form,"QRCodePwd",e)},expression:"form.QRCodePwd"}}),a("p",{staticClass:"red"},[t._v("如需使用QRcode報到，請設定QRcode密碼")])],1)],1):t._e()]),a("div",{staticClass:"formButtonList"},[t.step>1?a("el-button",{on:{click:function(e){t.step--}}},[t._v("上一步")]):t._e(),t.step<3?a("el-button",{on:{click:function(e){return t.subTemp("form",t.step+1)}}},[t._v("下一步")]):t._e(),3==t.step?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.sub("form")}}},[t._v("儲存")]):t._e()],1)],1)],1)},o=[],n=r("a34a"),l=r.n(n),i=r("43b3"),s=r("cc6e"),c=r("c1df"),m=r.n(c);function f(t,e,r,a,o,n,l){try{var i=t[n](l),s=i.value}catch(c){return void r(c)}i.done?e(s):Promise.resolve(s).then(a,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(a,o){var n=t.apply(e,r);function l(t){f(n,a,o,l,i,"next",t)}function i(t){f(n,a,o,l,i,"throw",t)}l(void 0)}))}}var d={data:function(){return{tempId:"",step:1,canSave:!1,UnitList:[],FormList:[],CateTemp:[],changeCateTemp:"",IndividualStatementModuleList:[],getFormData:"",addFileForm:{type:"議程",path:[],remark:""},form:{MaxUser:999,ActCategoryId:"",ActCategoryOther:"",IndividualStatementId:"",ActName:"",ActOrganizer:"",ActSummary:"",ActImg:"[]",ActStartDate:"",ActEndDate:"",ShowDate:"",EndDate:"",HasCheckInCode:!0,CertificateId:null,CertificateNo:"",ActTypeId:"",ActTypeOther:"",SolicitFile:"[]",ActCountry:"中華民國",UseLanguage:"",UseLanguageOther:"",ActAddr:"",ActTime:0,NoticEmail:"",ShowUnit:"",ShowActContents:"",ShowActDate:"",ShowActAddr:"",ShowAcrUrl:"",ShowContactName:"",ShowUseLanguage:"",ShowActTime:"",WebMode:1,AttachmentFiles:"[]",FormId:17,SignupStartDate:"",SignupEndDate:"",HasCancelBtn:!0,RegisterColumns:"[]",IdentifyColumns:"[]",SignInColumns:"[]",CertificateColumns:"[]",MenuSort:'[{"Id":1,"title":"線上報名","Enable":true},{"Id":2,"title":"檔案下載","Enable":true},{"Id":3,"title":"活動詳情","Enable":true},{"Id":4,"title":"已報名名單","Enable":true},{"Id":5,"title":"交通指引","Enable":true},{"Id":6,"title":"本校平面圖","Enable":true}]',PostToCalendar:!0,ArchiveFiles:'{"start":"","end":"","auth":"","noAuth":"","allFile":[]}',ArchiveStatus:!1,TrafficType:1,TrafficFile:"[]",QRCodePwd:"",isEnable:!1},rules:{ActTypeId:[{required:!0,message:" ",trigger:"blur"}],IndividualStatementId:[{required:!0,message:" ",trigger:"blur"}],ActName:[{required:!0,message:" ",trigger:"blur"}],FormId:[{required:!0,message:" ",trigger:"blur"}]}}},watch:{},computed:{getMenuSort:function(){return JSON.parse(this.form.MenuSort)?JSON.parse(this.form.MenuSort):[]},getCateTemp:function(){var t=this;return this.CateTemp.filter((function(e){return e.UnitCode==t.changeCateTemp}))},userInfo:function(){return JSON.parse(window.localStorage.getItem("user"))},getEndYear:function(){return"Invalid date"!=m()(this.form.ActEndDate).format("YYYY")?m()(this.form.ActEndDate).format("YYYY"):""}},components:{Title:i["a"],Ck:s["a"]},created:function(){var t=this;return u(l.a.mark((function e(){var r,a;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("loadingHandler",!0),e.next=3,t.$api.GetAdminUserById({Id:JSON.parse(localStorage.user).Id}).then((function(t){return t.data.response}));case 3:return r=e.sent,e.next=6,t.$api.GetUnits().then((function(t){return t.data}));case 6:return t.UnitList=e.sent,t.UnitList=t.UnitList.filter((function(t){return-1!=r.CtrlUnits.indexOf(t.UntId)})),e.next=10,t.$api.GetFormNoPage().then((function(t){return t.data}));case 10:return t.FormList=e.sent,t.FormList=t.FormList.filter((function(t){return-1!=r.CtrlUnits.indexOf(t.UnitCode)||" "==t.UnitCode})),e.next=14,t.$api.GetCertificateTempNoPage().then((function(t){return t.data.response}));case 14:return t.CateTemp=e.sent,e.next=17,t.$api.GetIndividualStatementModuleNoPage().then((function(t){return t.data}));case 17:if(t.IndividualStatementModuleList=e.sent,!t.$router.currentRoute.query.Id){e.next=24;break}return a={Id:t.$router.currentRoute.query.Id},e.next=22,t.$api.GetActivityById(a).then((function(t){return t.data.response}));case 22:t.form=e.sent,t.form.CertificateId&&(t.changeCateTemp=t.CateTemp.filter((function(e){return e.Id==t.form.CertificateId}))[0].UnitCode);case 24:if(!t.form.FormId){e.next=27;break}return e.next=27,t.GetFormById(t.form.FormId);case 27:t.$router.currentRoute.query.Id||(t.form.NoticEmail=t.userInfo.Email),t.form.ActImg=JSON.parse(t.form.ActImg),t.form.MenuSort=JSON.parse(t.form.MenuSort),t.form.IdentifyColumns=JSON.parse(t.form.IdentifyColumns),t.form.RegisterColumns=JSON.parse(t.form.RegisterColumns),t.form.SignInColumns=JSON.parse(t.form.SignInColumns),t.form.CertificateColumns=JSON.parse(t.form.CertificateColumns),t.form.AttachmentFiles=JSON.parse(t.form.AttachmentFiles),t.form.SolicitFile=JSON.parse(t.form.SolicitFile),t.form.TrafficFile=JSON.parse(t.form.TrafficFile),t.$store.dispatch("loadingHandler",!1);case 38:case"end":return e.stop()}}),e)})))()},methods:{subTemp:function(t,e){var r=this;return u(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e>1)){t.next=4;break}if(r.form.ActName&&r.form.ActTypeId&&r.form.IndividualStatementId){t.next=4;break}return r.$alertM.fire({icon:"error",title:"必填欄位請填完整"}),t.abrupt("return",!1);case 4:if(r.form.ActImg="string"!==typeof r.form.ActImg?JSON.stringify(r.form.ActImg):"[]",r.form.MenuSort="string"!==typeof r.form.MenuSort?JSON.stringify(r.form.MenuSort):"[]",r.form.IdentifyColumns="string"!==typeof r.form.IdentifyColumns?JSON.stringify(r.form.IdentifyColumns):"[]",r.form.RegisterColumns="string"!==typeof r.form.RegisterColumns?JSON.stringify(r.form.RegisterColumns):"[]",r.form.SignInColumns="string"!==typeof r.form.SignInColumns?JSON.stringify(r.form.SignInColumns):"[]",r.form.CertificateColumns="string"!==typeof r.form.CertificateColumns?JSON.stringify(r.form.CertificateColumns):"[]",r.form.AttachmentFiles="string"!==typeof r.form.AttachmentFiles?JSON.stringify(r.form.AttachmentFiles):"[]",r.form.SolicitFile="string"!==typeof r.form.SolicitFile?JSON.stringify(r.form.SolicitFile):"[]",r.form.TrafficFile="string"!==typeof r.form.TrafficFile?JSON.stringify(r.form.TrafficFile):"[]",r.$router.currentRoute.query.Id||r.tempId){t.next=28;break}return t.next=16,r.$api.PostActivity(r.form).then((function(t){r.tempId=t.data.response})).catch((function(){return"網路錯誤"}));case 16:return r.form.ActImg=JSON.parse(r.form.ActImg),r.form.MenuSort=JSON.parse(r.form.MenuSort),r.form.IdentifyColumns=JSON.parse(r.form.IdentifyColumns),r.form.RegisterColumns=JSON.parse(r.form.RegisterColumns),r.form.SignInColumns=JSON.parse(r.form.SignInColumns),r.form.CertificateColumns=JSON.parse(r.form.CertificateColumns),r.form.AttachmentFiles=JSON.parse(r.form.AttachmentFiles),r.form.SolicitFile=JSON.parse(r.form.SolicitFile),r.form.TrafficFile=JSON.parse(r.form.TrafficFile),r.$store.dispatch("loadingHandler",!1),r.step=e,t.abrupt("return",0);case 28:if(!r.tempId&&!r.$router.currentRoute.query.Id){t.next=46;break}return"",console.log("call",r.form),r.form.Id=Number(r.tempId||r.$router.currentRoute.query.Id),t.next=34,r.$api.PutActivity(r.form).then((function(t){t.data.msg})).catch((function(){return"網路錯誤"}));case 34:return r.form.ActImg=JSON.parse(r.form.ActImg),r.form.MenuSort=JSON.parse(r.form.MenuSort),r.form.IdentifyColumns=JSON.parse(r.form.IdentifyColumns),r.form.RegisterColumns=JSON.parse(r.form.RegisterColumns),r.form.SignInColumns=JSON.parse(r.form.SignInColumns),r.form.CertificateColumns=JSON.parse(r.form.CertificateColumns),r.form.AttachmentFiles=JSON.parse(r.form.AttachmentFiles),r.form.SolicitFile=JSON.parse(r.form.SolicitFile),r.form.TrafficFile=JSON.parse(r.form.TrafficFile),r.$store.dispatch("loadingHandler",!1),r.step=e,t.abrupt("return",0);case 46:case"end":return t.stop()}}),t)})))()},sub:function(t){var e=this;return u(l.a.mark((function r(){var a,o;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e,o="",e.$refs[t].validate(function(){var t=u(l.a.mark((function t(r){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=23;break}if(e.form.ActImg=JSON.stringify(e.form.ActImg),e.form.MenuSort=JSON.stringify(e.form.MenuSort),e.form.IdentifyColumns=JSON.stringify(e.form.IdentifyColumns),e.form.RegisterColumns=JSON.stringify(e.form.RegisterColumns),e.form.SignInColumns=JSON.stringify(e.form.SignInColumns),e.form.CertificateColumns=JSON.stringify(e.form.CertificateColumns),e.form.AttachmentFiles=JSON.stringify(e.form.AttachmentFiles),e.form.SolicitFile=JSON.stringify(e.form.SolicitFile),e.form.TrafficFile=JSON.stringify(e.form.TrafficFile),e.form.PostToCalendar&&e.subToCalendar(),!e.$router.currentRoute.query.Id&&!e.tempId){t.next=17;break}return e.form.Id=e.$router.currentRoute.query.Id||e.tempId,t.next=15,e.$api.PutActivity(e.form).then((function(t){o=t.data.msg,a.$alertM.fire({icon:"網路錯誤"==o?"error":"success",title:o})})).catch((function(){return"網路錯誤"}));case 15:t.next=19;break;case 17:return t.next=19,e.$api.PostActivity(e.form).then((function(t){o=t.data.msg,a.$alertM.fire({icon:"網路錯誤"==o?"error":"success",title:o})})).catch((function(){return"網路錯誤"}));case 19:e.$router.push({path:"/Activity/List"}),e.$store.dispatch("loadingHandler",!1),t.next=25;break;case 23:return a.$alertM.fire({icon:"error",title:"請檢查欄位是否正確填寫"}),t.abrupt("return",!1);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return r.stop()}}),r)})))()},subToCalendar:function(){var t=this;return u(l.a.mark((function e(){var r;return l.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={Id:0,EventName:t.form.ActName,EventTypeId:134,Summary:t.form.ActSummary,EventStartDate:t.form.ActStartDate,EventEndDate:t.form.ActEndDate,EventAddr:t.form.ActAddr,ShowStartDate:t.form.ShoDate,ShowEndDate:t.form.EndDate,PushData:!1,UnitCode:JSON.parse(localStorage.user).UnitCode,attachDocList:JSON.parse(t.form.AttachmentFiles).map((function(t){return t.path[0].response})).join(","),LinkUrl:t.form.ShowAcrUrl,JoinUsers:[]},e.abrupt("return",t.$api.AddEvent(r).then((function(t){return t})));case 2:case"end":return e.stop()}}),e)})))()},successUpdata:function(t,e,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"form";a&&(this[o][r]=[]),t.remark="",this[o][r].push(t)},FilesRemove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AttachmentFiles";this.form[e].splice(t,1)},ArrayMove:function(t,e,r){if(r>=t.length){var a=r-t.length+1;while(a--)t.push(void 0)}return t.splice(r,0,t.splice(e,1)[0]),t},GetFormById:function(t){var e=this;return u(l.a.mark((function r(){return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return",0);case 2:return e.$store.dispatch("loadingHandler",!0),r.next=5,e.$api.GetFormById({Id:t}).then((function(t){return t.data.response}));case 5:e.getFormData=r.sent,e.$store.dispatch("loadingHandler",!1);case 7:case"end":return r.stop()}}),r)})))()},clear:function(){this.form.RegisterColumns=[],this.form.IdentifyColumns=[],this.form.SignInColumns=["序號","代理人","參與狀況"],this.form.CertificateColumns=[]},toAddFile:function(){if(!this.addFileForm.path)return this.$alertM.fire({icon:"error",title:"請上傳檔案"}),0;this.form.AttachmentFiles.push(this.addFileForm),this.addFileForm={type:"議程",path:"",remark:""},console.log(this.form.AttachmentFiles)},CertificateNoGet:function(){this.form.CertificateNo=m()(this.form.ActEndDate).format("YYYY")}}},p=d,h=r("2877"),v=Object(h["a"])(p,a,o,!1,null,null,null);e["default"]=v.exports},a34a:function(t,e,r){t.exports=r("96cf")},a878:function(t,e,r){t.exports=r.p+"img/GroupRight.0b381a34.svg"},c297:function(t,e,r){"use strict";var a=r("e3ff"),o=r.n(a);o.a},cc6e:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{style:{width:t.width},attrs:{id:"ckComp"}},[r("ckeditor",{attrs:{value:t.value},on:{input:t.updata}})],1)},o=[],n={name:"Ck",props:["value","width"],data:function(){return{ckContent:""}},methods:{updata:function(t){this.$emit("input",t)}}},l=n,i=(r("c297"),r("2877")),s=Object(i["a"])(l,a,o,!1,null,null,null);e["a"]=s.exports},e3ff:function(t,e,r){},e98f:function(t,e,r){t.exports=r.p+"img/GroupCenter.a9d352c9.svg"}}]);
//# sourceMappingURL=chunk-73435954.167ce7f8.js.map