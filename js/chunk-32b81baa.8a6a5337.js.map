{"version":3,"sources":["webpack:///./src/views/User/Org.vue?6ba9","webpack:///./src/views/User/Org.vue?e6f5","webpack:///src/views/User/Org.vue","webpack:///./src/views/User/Org.vue?4e14","webpack:///./src/views/User/Org.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","slot","_v","_l","item","key","UntId","class","selectedOrg","on","$event","handleSelectOrg","_s","UntNameFull","_e","handleDialog","Id","RealName","LoginName","handleDelete","addDialog","model","value","callback","$$v","memberId","expression","handleAdd","staticRenderFns","name","data","CtrlUnits","orgMembers","userList","methods","getUnits","vm","$api","GetUnits","then","arr","includes","u","console","log","id","Org","Type","GetAdminUserByOrgId","params","res","response","userId","unitCode","PutAdminUserByOrgId","DeleteAdminUserByOrgId","mounted","component"],"mappings":"kHAAA,yBAAqjB,EAAG,G,2CCAxjB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,SAAS,CAACE,YAAY,gBAAgBC,YAAY,CAAC,OAAS,YAAYC,MAAM,CAAC,KAAO,IAAI,CAACJ,EAAG,UAAU,CAACE,YAAY,WAAWC,YAAY,CAAC,MAAQ,SAAS,CAACH,EAAG,MAAM,CAACE,YAAY,kBAAkBE,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACL,EAAG,OAAO,CAACJ,EAAIU,GAAG,aAAaN,EAAG,MAAM,CAACE,YAAY,iBAAiBN,EAAIW,GAAIX,EAAa,WAAE,SAASY,GAAM,OAAOR,EAAG,MAAM,CAACS,IAAID,EAAKE,MAAMR,YAAY,WAAWS,MAAM,CAAEC,YAAahB,EAAIgB,cAAgBJ,EAAKE,OAAQG,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAImB,gBAAgBP,EAAKE,UAAU,CAACd,EAAIU,GAAG,IAAIV,EAAIoB,GAAGR,EAAKS,aAAa,KAAMrB,EAAIgB,cAAgBJ,EAAKE,MAAOV,EAAG,IAAI,CAACE,YAAY,iBAAiBN,EAAIsB,UAAS,MAAM,GAAGlB,EAAG,SAAS,CAACE,YAAY,gBAAgBE,MAAM,CAAC,KAAO,KAAK,CAACJ,EAAG,UAAU,CAACE,YAAY,WAAWC,YAAY,CAAC,MAAQ,SAAS,CAACH,EAAG,MAAM,CAACE,YAAY,kBAAkBE,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACL,EAAG,OAAO,CAACJ,EAAIU,GAAG,UAAUN,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQS,GAAG,CAAC,MAAQjB,EAAIuB,eAAe,CAACvB,EAAIU,GAAG,SAAS,GAAGN,EAAG,MAAM,CAACE,YAAY,mBAAmBN,EAAIW,GAAIX,EAAc,YAAE,SAASY,GAAM,OAAOR,EAAG,MAAM,CAACS,IAAID,EAAKY,GAAGlB,YAAY,YAAY,CAACF,EAAG,OAAO,CAACG,YAAY,CAAC,MAAQ,QAAQ,QAAU,iBAAiB,CAACP,EAAIU,GAAG,IAAIV,EAAIoB,GAAGR,EAAKa,UAAU,IAAIzB,EAAIoB,GAAGR,EAAKc,cAActB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,OAAO,KAAO,UAAUS,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAI2B,aAAaf,EAAKY,OAAO,CAACxB,EAAIU,GAAG,SAAS,MAAK,MAAM,GAAGN,EAAG,YAAY,CAACI,MAAM,CAAC,MAAQ,OAAO,QAAUR,EAAI4B,UAAU,MAAQ,OAAOX,GAAG,CAAC,iBAAiB,SAASC,GAAQlB,EAAI4B,UAAUV,KAAU,CAACd,EAAG,YAAY,CAACI,MAAM,CAAC,WAAa,GAAG,YAAc,OAAOqB,MAAM,CAACC,MAAO9B,EAAY,SAAE+B,SAAS,SAAUC,GAAMhC,EAAIiC,SAASD,GAAKE,WAAW,aAAalC,EAAIW,GAAIX,EAAY,UAAE,SAASY,GAAM,OAAOR,EAAG,YAAY,CAACS,IAAID,EAAKY,GAAGhB,MAAM,CAAC,MAAUI,EAAa,SAAI,IAAOA,EAAc,UAAG,MAAQA,EAAKY,SAAQ,GAAGpB,EAAG,OAAO,CAACE,YAAY,gBAAgBE,MAAM,CAAC,KAAO,UAAUC,KAAK,UAAU,CAACL,EAAG,YAAY,CAACa,GAAG,CAAC,MAAQ,SAASC,GAAQlB,EAAI4B,WAAY,KAAS,CAAC5B,EAAIU,GAAG,SAASN,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWS,GAAG,CAAC,MAAQjB,EAAImC,YAAY,CAACnC,EAAIU,GAAG,UAAU,IAAI,IAAI,IAC7rE0B,EAAkB,GC8DtB,GACEC,KAAM,MACNC,KAFF,WAGI,MAAO,CAELC,UAAW,GAGXvB,YAAa,GAGbiB,SAAU,GAGVO,WAAY,GAGZC,SAAU,GAEVb,WAAW,IAGfc,QAAS,CAEPC,SAFJ,WAEA,WACA,OACMC,EAAGC,KAAKC,WAAWC,MAAK,SAA9B,GACQ,IAAR,qDACQ,EAAR,qCACU,OAAOC,EAAIC,SAASC,EAAEpC,UAExBqC,QAAQC,IAAI,EAApB,eAKIjC,gBAdJ,SAcA,cACMlB,KAAKe,YAAcqC,EACnB,IAAN,GACQC,IAAKrD,KAAKe,YACVuC,KAAM,GAERtD,KAAK4C,KAAKW,oBAAoBC,GAAQV,MAAK,SAAjD,GACQI,QAAQC,IAAIM,EAAIpB,KAAKqB,UACrB,EAAR,+BAKIpC,aA3BJ,WA2BA,WACMtB,KAAK2B,WAAY,EACjB,IAAN,GACQ0B,IAAKrD,KAAKe,YACVuC,KAAM,GAERtD,KAAK4C,KAAKW,oBAAoBC,GAAQV,MAAK,SAAjD,GACQI,QAAQC,IAAIM,EAAIpB,KAAKqB,UACrB,EAAR,6BAKIxB,UAxCJ,WAwCA,WACA,GACQyB,OAAQ3D,KAAKgC,SACb4B,SAAU5D,KAAKe,aAEjBf,KAAK4C,KAAKiB,oBAAoBL,GAAQV,MAAK,SAAjD,GACQ,EAAR,aACQ,EAAR,mCAKIpB,aApDJ,SAoDA,cACA,GACQiC,OAAQP,EACRQ,SAAU5D,KAAKe,aAEjBf,KAAK4C,KAAKkB,uBAAuBN,GAAQV,MAAK,SAApD,GACQ,EAAR,oCAIEiB,QApFF,WAqFI/D,KAAK0C,aCpJmV,I,wBCQxVsB,EAAY,eACd,EACAlE,EACAqC,GACA,EACA,KACA,WACA,MAIa,aAAA6B,E","file":"js/chunk-32b81baa.8a6a5337.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Org.vue?vue&type=style&index=0&id=2fa95e81&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Org.vue?vue&type=style&index=0&id=2fa95e81&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"org\"},[_c('el-col',{staticClass:\"toolbar roles\",staticStyle:{\"margin\":\"0 1.5rem\"},attrs:{\"span\":8}},[_c('el-card',{staticClass:\"box-card\",staticStyle:{\"width\":\"100%\"}},[_c('div',{staticClass:\"authorityHeader\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"擁有組織 \")])]),_c('div',{staticClass:\"unitContainer\"},_vm._l((_vm.CtrlUnits),function(item){return _c('div',{key:item.UntId,staticClass:\"ctrlUnit\",class:{ selectedOrg: _vm.selectedOrg === item.UntId },on:{\"click\":function($event){return _vm.handleSelectOrg(item.UntId)}}},[_vm._v(\" \"+_vm._s(item.UntNameFull)+\" \"),(_vm.selectedOrg === item.UntId)?_c('i',{staticClass:\"fas fa-check\"}):_vm._e()])}),0)])],1),_c('el-col',{staticClass:\"toolbar roles\",attrs:{\"span\":12}},[_c('el-card',{staticClass:\"box-card\",staticStyle:{\"width\":\"100%\"}},[_c('div',{staticClass:\"authorityHeader\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"組織成員\")]),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":_vm.handleDialog}},[_vm._v(\"新增\")])],1),_c('div',{staticClass:\"memberContainer\"},_vm._l((_vm.orgMembers),function(item){return _c('div',{key:item.Id,staticClass:\"ctrlUnit\"},[_c('span',{staticStyle:{\"width\":\"150px\",\"display\":\"inline-block\"}},[_vm._v(\" \"+_vm._s(item.RealName)+\"_\"+_vm._s(item.LoginName))]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(item.Id)}}},[_vm._v(\"刪除\")])],1)}),0)])],1),_c('el-dialog',{attrs:{\"title\":\"新增成員\",\"visible\":_vm.addDialog,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.addDialog=$event}}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"請選擇\"},model:{value:(_vm.memberId),callback:function ($$v) {_vm.memberId=$$v},expression:\"memberId\"}},_vm._l((_vm.userList),function(item){return _c('el-option',{key:item.Id,attrs:{\"label\":((item.RealName) + \"_\" + (item.LoginName)),\"value\":item.Id}})}),1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"確 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"org\">\r\n    <!-- 可控組織 -->\r\n    <el-col style=\"margin: 0 1.5rem\" :span=\"8\" class=\"toolbar roles\">\r\n      <el-card class=\"box-card\" style=\"width: 100%\">\r\n        <div slot=\"header\" class=\"authorityHeader\">\r\n          <span>擁有組織 </span>\r\n        </div>\r\n        <div class=\"unitContainer\">\r\n          <div\r\n            @click=\"handleSelectOrg(item.UntId)\"\r\n            class=\"ctrlUnit\"\r\n            v-for=\"item in CtrlUnits\"\r\n            :key=\"item.UntId\"\r\n            :class=\"{ selectedOrg: selectedOrg === item.UntId }\"\r\n          >\r\n            {{ item.UntNameFull }}\r\n            <i v-if=\"selectedOrg === item.UntId\" class=\"fas fa-check\"></i>\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </el-col>\r\n\r\n    <!-- 組織成員 -->\r\n    <el-col :span=\"12\" class=\"toolbar roles\">\r\n      <el-card class=\"box-card\" style=\"width: 100%\">\r\n        <div slot=\"header\" class=\"authorityHeader\">\r\n          <span>組織成員</span>\r\n          <el-button size=\"mini\" @click=\"handleDialog\">新增</el-button>\r\n        </div>\r\n        <div class=\"memberContainer\">\r\n          <div class=\"ctrlUnit\" v-for=\"item in orgMembers\" :key=\"item.Id\">\r\n            <span style=\"width: 150px; display: inline-block\">\r\n              {{ item.RealName }}_{{ item.LoginName }}</span\r\n            >\r\n            <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(item.Id)\"\r\n              >刪除</el-button\r\n            >\r\n          </div>\r\n        </div>\r\n      </el-card>\r\n    </el-col>\r\n\r\n    <!-- 新增dialog -->\r\n    <el-dialog title=\"新增成員\" :visible.sync=\"addDialog\" width=\"30%\">\r\n      <el-select filterable v-model=\"memberId\" placeholder=\"請選擇\">\r\n        <el-option\r\n          v-for=\"item in userList\"\r\n          :key=\"item.Id\"\r\n          :label=\"`${item.RealName}_${item.LoginName}`\"\r\n          :value=\"item.Id\"\r\n        >\r\n        </el-option>\r\n      </el-select>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleAdd\">確 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"org\",\r\n  data() {\r\n    return {\r\n      /* 可控組織 */\r\n      CtrlUnits: \"\",\r\n\r\n      /* 選定組織 */\r\n      selectedOrg: \"\",\r\n\r\n      /* 選定成員 */\r\n      memberId: \"\",\r\n\r\n      /* 組織成員 */\r\n      orgMembers: \"\",\r\n\r\n      /* 用戶 */\r\n      userList: \"\",\r\n\r\n      addDialog: false,\r\n    };\r\n  },\r\n  methods: {\r\n    /* 獲取所有組織 並設定可控組織 */\r\n    getUnits() {\r\n      const vm = this;\r\n      vm.$api.GetUnits().then((res) => {\r\n        let arr = JSON.parse(localStorage.getItem(\"user\")).CtrlUnits;\r\n        this.CtrlUnits = res.data.filter((u) => {\r\n          return arr.includes(u.UntId);\r\n        });\r\n        console.log(this.CtrlUnits);\r\n      });\r\n    },\r\n\r\n    /* 選擇組織 並獲取該組織下的成員 */\r\n    handleSelectOrg(id) {\r\n      this.selectedOrg = id;\r\n      let params = {\r\n        Org: this.selectedOrg,\r\n        Type: 1,\r\n      };\r\n      this.$api.GetAdminUserByOrgId(params).then((res) => {\r\n        console.log(res.data.response);\r\n        this.orgMembers = res.data.response;\r\n      });\r\n    },\r\n\r\n    /* 開啟dialog */\r\n    handleDialog() {\r\n      this.addDialog = true;\r\n      let params = {\r\n        Org: this.selectedOrg,\r\n        Type: 0,\r\n      };\r\n      this.$api.GetAdminUserByOrgId(params).then((res) => {\r\n        console.log(res.data.response);\r\n        this.userList = res.data.response;\r\n      });\r\n    },\r\n\r\n    /* 新增成員 */\r\n    handleAdd() {\r\n      let params = {\r\n        userId: this.memberId,\r\n        unitCode: this.selectedOrg,\r\n      };\r\n      this.$api.PutAdminUserByOrgId(params).then((res) => {\r\n        this.addDialog = false;\r\n        this.handleSelectOrg(this.selectedOrg);\r\n      });\r\n    },\r\n\r\n    /* 刪除成員 */\r\n    handleDelete(id) {\r\n      let params = {\r\n        userId: id,\r\n        unitCode: this.selectedOrg,\r\n      };\r\n      this.$api.DeleteAdminUserByOrgId(params).then((res) => {\r\n        this.handleSelectOrg(this.selectedOrg);\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getUnits();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\n.authorityHeader {\r\n  display: flex;\r\n  justify-content: space-between;\r\n}\r\n.unitContainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.box-card {\r\n  height: calc(100vh - 160px);\r\n  overflow: auto;\r\n}\r\n.ctrlUnit {\r\n  margin-bottom: 0.5rem;\r\n  transition: 0.5s;\r\n  cursor: pointer;\r\n\r\n  &.selectedOrg {\r\n    color: green;\r\n  }\r\n\r\n  &:hover {\r\n    font-weight: 700;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Org.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Org.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Org.vue?vue&type=template&id=2fa95e81&scoped=true&\"\nimport script from \"./Org.vue?vue&type=script&lang=js&\"\nexport * from \"./Org.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Org.vue?vue&type=style&index=0&id=2fa95e81&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2fa95e81\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}